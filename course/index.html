<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>憨憨的课表</title>
    <style>
      table {
        border-collapse: collapse;
        width: 1440px;
      }

      th,
      td {
        border: 1px solid black;
        padding: 8px;
        text-align: left;
      }

      td {
        height: 40px; /* 设置每节课的高度 */
        width: 180px;
      }

      .course {
        background-color: lightblue;
        margin-bottom: 5px;
        padding: 5px;
        border-radius: 5px;
      }

      .today {
        /* 突出显示今天的列 */
        background-color: lightyellow;
      }
    </style>
  </head>
  <body>
    <h1 id="title">第10周课表</h1>
    <table>
      <thead>
        <tr>
          <th></th>
          <th>星期一</th>
          <th>星期二</th>
          <th>星期三</th>
          <th>星期四</th>
          <th>星期五</th>
          <th>星期六</th>
          <th>星期日</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </body>
  <script type="module">
    const weekList = [
      "星期一",
      "星期二",
      "星期三",
      "星期四",
      "星期五",
      "星期六",
      "星期日",
    ];
    const courses = [
      {
        name: "地球概论",
        teacher: "汪冰寒",
        week: "星期一",
        range: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18],
        time: [1, 2],
        place: "505",
      },
      {
        name: "水文与地貌学[讲课学时]",
        teacher: "叶超然",
        week: "星期二",
        range: [1, 2, 4, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
        time: [1, 2],
        place: "501",
      },
      {
        name: "马克思主义基本原理概论",
        teacher: "王遂敏",
        week: "星期四",
        range: [1, 2, 3, 4, 6, 8, 10, 11, 13, 14, 15, 16, 17, 18],
        time: [1, 2],
        place: "学术报告厅",
      },
      {
        name: "地理信息系统[实验学时]",
        teacher: "李权国",
        week: "星期六",
        range: [12, 13],
        time: [1, 2],
        place: "N6-507\n分组02（组）",
      },
      {
        name: "地质学基础[实验学时]",
        teacher: "金承胜",
        week: "星期六",
        range: [9],
        time: [1, 2],
        place: "N8-C508\n分组03（组）",
      },
      {
        name: "地质学基础[实验学时]",
        teacher: "金承胜",
        week: "星期天",
        range: [10],
        time: [1, 2],
        place: "N8-C508\n分组03（组）",
      },
      {
        name: "自然资源学",
        teacher: "张良茂",
        week: "星期一",
        range: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],
        time: [3, 4],
        place: "506",
      },
      {
        name: "中国地理",
        teacher: "孙小舟",
        week: "星期三",
        range: [1, 2, 3, 4, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
        time: [3, 4],
        place: "601",
      },
      {
        name: "土壤与生物地理[讲课学时]",
        teacher: "聂芳",
        week: "星期四",
        range: [1, 2, 3, 4, 6, 7, 8, 10, 11, 13, 14, 15, 16, 17, 18],
        time: [3, 4],
        place: "502",
      },
      {
        name: "地理科学导论",
        teacher: "郭超",
        week: "星期五",
        range: [5, 6, 7, 8, 10, 11, 13, 14],
        time: [3, 4],
        place: "601",
      },
      {
        name: "马克思主义基本原理概论",
        teacher: "王遂敏",
        week: "星期五",
        range: [1, 2, 3, 4],
        time: [3, 4],
        place: "学术报告厅",
      },
      {
        name: "土壤与生物地理[讲课学时]",
        teacher: "聂芳",
        week: "星期五",
        range: [15],
        time: [3, 4],
        place: "606",
      },
      {
        name: "地理信息系统[实验学时]",
        teacher: "李权国",
        week: "星期六",
        range: [12, 13],
        time: [3, 4],
        place: "N6-507\n分组02（组）",
      },
      {
        name: "地质学基础[实验学时]",
        teacher: "金承胜",
        week: "星期六",
        range: [9],
        time: [3, 4],
        place: "N8-C508\n分组03（组）",
      },
      {
        name: "地质学基础[实验学时]",
        teacher: "金承胜",
        week: "星期天",
        range: [10],
        time: [3, 4],
        place: "N8-C508\n分组03（组）",
      },
      {
        name: "人文地理学",
        teacher: "张弢",
        week: "星期一",
        range: [1, 2, 3, 4, 5],
        time: [5, 6],
        place: "501",
      },
      {
        name: "人文地理学",
        teacher: "蒋小荣",
        week: "星期一",
        range: [6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],
        time: [5, 6],
        place: "605",
      },
      {
        name: "土壤与生物地理[实验学时]",
        teacher: "聂芳",
        week: "星期三",
        range: [4, 9, 13],
        time: [5, 6],
        place: "N8-C208\n分组04（组）",
      },
      {
        name: "大学体育5",
        teacher: "邵年丰",
        week: "星期五",
        range: [1, 2, 3, 4, 5, 6, 7, 8, 10, 11, 13, 14, 15, 16, 17, 18],
        time: [5, 6],
        place: "(暂无教室)\n分组1（组）",
      },
      {
        name: "地理信息系统[实验学时]",
        teacher: "李权国",
        week: "星期六",
        range: [12, 13],
        time: [5, 6],
        place: "N6-507\n分组02（组）",
      },
      {
        name: "地质学基础[实验学时]",
        teacher: "金承胜",
        week: "星期六",
        range: [9],
        time: [5, 6],
        place: "N8-C508\n分组03（组）",
      },
      {
        name: "地质学基础[实验学时]",
        teacher: "金承胜",
        week: "星期天",
        range: [10],
        time: [5, 6],
        place: "N8-C508\n分组03（组）",
      },
      {
        name: "地理信息系统[讲课学时]",
        teacher: "李权国",
        week: "星期一",
        range: [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
        time: [7, 8],
        place: "608",
      },
      {
        name: "地质学基础[讲课学时]",
        teacher: "金承胜",
        week: "星期二",
        range: [1, 2, 4, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18],
        time: [7, 8],
        place: "学术报告厅",
      },
      {
        name: "土壤与生物地理[实验学时]",
        teacher: "聂芳",
        week: "星期三",
        range: [4, 9, 13],
        time: [7, 8],
        place: "N8-C208\n分组04（组）",
      },
      {
        name: "水文与地貌学[讲课学时]",
        teacher: "叶超然",
        week: "星期五",
        range: [1],
        time: [7, 8],
        place: "501",
      },
      {
        name: "水文与地貌学[实验学时]",
        teacher: "叶超然",
        week: "星期五",
        range: [6, 7, 8, 10, 11, 13, 14, 15],
        time: [7, 8],
        place: "507",
      },
      {
        name: "地理信息系统[实验学时]",
        teacher: "李权国",
        week: "星期六",
        range: [12, 13],
        time: [7, 8],
        place: "N6-507\n分组02（组）",
      },
      {
        name: "地质学基础[实验学时]",
        teacher: "金承胜",
        week: "星期六",
        range: [9],
        time: [7, 8],
        place: "N8-C508\n分组03（组）",
      },
      {
        name: "地质学基础[实验学时]",
        teacher: "金承胜",
        week: "星期天",
        range: [10],
        time: [7, 8],
        place: "N8-C508\n分组03（组）",
      },
      {
        name: "中国地理",
        teacher: "孙小舟",
        week: "星期一",
        range: [11, 12, 13, 14, 15, 16, 17, 18],
        time: [9, 10],
        place: "601",
      },
      {
        name: "地球概论",
        teacher: "汪冰寒",
        week: "星期二",
        range: [6, 7, 8, 9, 10, 11],
        time: [9, 10],
        place: "502",
      },
      {
        name: "土壤与生物地理[实验学时]",
        teacher: "聂芳",
        week: "星期三",
        range: [9, 13],
        time: [9, 10],
        place: "N8-C208\n分组04（组）",
      },
    ];

    // 获取当前周数（假设学期从第1周开始）
    const today = new Date();
    // 开学日期
    const termStart = new Date("2024-09-01"); 
    const currentWeek = Math.ceil(
      ((today - termStart) / 86400000 + termStart.getDay() + 1) / 7
    );

    const schedule = {};

    // 初始化课表
    weekList.forEach((week) => {
      schedule[week] = [];
    });

    // 将课程添加到课表中
    courses.forEach((course) => {
      if (course.range.includes(currentWeek)) {
        schedule[course.week].push({
          name: course.name,
          teacher: course.teacher,
          time: course.time,
          place: course.place,
        });
      }
    });

    // 渲染title
    document.querySelector("#title").textContent = `第${currentWeek}周课表`;

    /* 渲染课表 */
    const tbody = document.querySelector("tbody");
    const todayWeek = today.getDay() - 1; // 获取今天是星期几 (1 - 7)

    // 假设一天最多10节课
    for (let i = 1; i <= 10; i += 2) {
      const row = tbody.insertRow();
      // 创建时间列
      const timeCell = row.insertCell();
      timeCell.textContent = `${i}-${i + 1}节`;
      // 创建星期列
      for (let j = 1; j <= 7; j++) {
        const day = weekList[j - 1];
        const cell = row.insertCell();
        // 如果是今天的列，则添加 today 类名
        if (j - 1 === todayWeek) {
          cell.classList.add("today");
        }

        const courses = schedule[day].filter((course) => course.time[0] === i);
        if (courses.length > 0) {
          courses.forEach((course) => {
            const div = document.createElement("div");
            div.classList.add("course"); // 添加 course 类名
            div.innerHTML = `${course.name}<br>${
              course.teacher
            }<br>${course.place.replace(/\n/g, "<br>")}`;
            cell.appendChild(div);
          });
        }
      }
    }
    /* 渲染课表 */


  </script>
</html>
